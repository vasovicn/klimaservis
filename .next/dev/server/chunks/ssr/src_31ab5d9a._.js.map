{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/BookingsList.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback, useMemo } from \"react\";\n\ninterface Booking {\n  id: string;\n  customerName: string;\n  customerPhone: string;\n  customerAddress: string;\n  services: string;\n  date: string;\n  startTime: string;\n  endTime: string;\n  status: string;\n  user: { firstName: string; lastName: string };\n}\n\nconst statusBadge: Record<string, string> = {\n  confirmed: \"bg-brand-100 text-brand-700\",\n  completed: \"bg-green-100 text-green-700\",\n  cancelled: \"bg-gray-100 text-gray-500\",\n};\n\nconst statusLabel: Record<string, string> = {\n  confirmed: \"Potvrđeno\",\n  completed: \"Završeno\",\n  cancelled: \"Otkazano\",\n};\n\nconst DAYS_SERBIAN = [\"Nedelja\", \"Ponedeljak\", \"Utorak\", \"Sreda\", \"Četvrtak\", \"Petak\", \"Subota\"];\nconst MONTHS_SERBIAN = [\n  \"januar\", \"februar\", \"mart\", \"april\", \"maj\", \"jun\",\n  \"jul\", \"avgust\", \"septembar\", \"oktobar\", \"novembar\", \"decembar\",\n];\n\nfunction todayStr() {\n  const t = new Date();\n  return `${t.getFullYear()}-${String(t.getMonth() + 1).padStart(2, \"0\")}-${String(t.getDate()).padStart(2, \"0\")}`;\n}\n\nfunction formatDateLabel(dateStr: string): string {\n  const d = new Date(dateStr + \"T00:00:00\");\n  const dayName = DAYS_SERBIAN[d.getDay()];\n  const day = d.getDate();\n  const month = MONTHS_SERBIAN[d.getMonth()];\n  const year = d.getFullYear();\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const diff = Math.round((d.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n\n  let label = `${dayName}, ${day}. ${month} ${year}`;\n  if (diff === 0) label += \" (Danas)\";\n  else if (diff === 1) label += \" (Sutra)\";\n  else if (diff === -1) label += \" (Juče)\";\n\n  return label;\n}\n\nexport default function BookingsList({ refreshKey }: { refreshKey: number }) {\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showPast, setShowPast] = useState(false);\n  const [pastDate, setPastDate] = useState(\"\");\n  const [pastBookings, setPastBookings] = useState<Booking[]>([]);\n  const [pastLoading, setPastLoading] = useState(false);\n\n  const fetchBookings = useCallback(() => {\n    setLoading(true);\n    fetch(\"/api/admin/bookings\")\n      .then((r) => r.json())\n      .then((data) => setBookings(data.bookings || []))\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    fetchBookings();\n  }, [fetchBookings, refreshKey]);\n\n  const fetchPastBookings = useCallback(() => {\n    if (!pastDate) return;\n    setPastLoading(true);\n    fetch(`/api/admin/bookings?showPast=true&pastDate=${pastDate}`)\n      .then((r) => r.json())\n      .then((data) => setPastBookings(data.bookings || []))\n      .finally(() => setPastLoading(false));\n  }, [pastDate]);\n\n  useEffect(() => {\n    if (showPast && pastDate) {\n      fetchPastBookings();\n    }\n  }, [showPast, pastDate, fetchPastBookings, refreshKey]);\n\n  const updateStatus = async (id: string, status: string) => {\n    const res = await fetch(`/api/admin/bookings/${id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status }),\n    });\n    if (!res.ok) {\n      const data = await res.json();\n      alert(data.error || \"Greška\");\n      return;\n    }\n    fetchBookings();\n    if (showPast && pastDate) fetchPastBookings();\n  };\n\n  const parseServices = (s: string) => {\n    try {\n      const ids = JSON.parse(s) as string[];\n      const map: Record<string, string> = {\n        mali: \"Mali\",\n        veliki: \"Veliki\",\n        kondenzator: \"Kondenzator\",\n        ostalo: \"Ostalo\",\n      };\n      return ids.map((id) => map[id] || id).join(\", \");\n    } catch {\n      return s;\n    }\n  };\n\n  // Group bookings by date - ascending (nearest first)\n  const grouped = useMemo(() => {\n    const groups: Record<string, Booking[]> = {};\n    for (const b of bookings) {\n      if (!groups[b.date]) groups[b.date] = [];\n      groups[b.date].push(b);\n    }\n    const sortedDates = Object.keys(groups).sort((a, b) => a.localeCompare(b));\n    return sortedDates.map((date) => ({\n      date,\n      label: formatDateLabel(date),\n      bookings: groups[date].sort((a, b) => a.startTime.localeCompare(b.startTime)),\n    }));\n  }, [bookings]);\n\n  const pastGrouped = useMemo(() => {\n    if (!pastBookings.length) return [];\n    const groups: Record<string, Booking[]> = {};\n    for (const b of pastBookings) {\n      if (!groups[b.date]) groups[b.date] = [];\n      groups[b.date].push(b);\n    }\n    const sortedDates = Object.keys(groups).sort((a, b) => a.localeCompare(b));\n    return sortedDates.map((date) => ({\n      date,\n      label: formatDateLabel(date),\n      bookings: groups[date].sort((a, b) => a.startTime.localeCompare(b.startTime)),\n    }));\n  }, [pastBookings]);\n\n  const today = todayStr();\n\n  const renderTable = (group: { date: string; label: string; bookings: Booking[] }, isPast: boolean) => (\n    <div key={group.date}>\n      <h3 className=\"mb-2 text-sm font-semibold text-gray-700\">\n        {group.label}\n      </h3>\n      <div className=\"overflow-x-auto rounded-xl border border-gray-200 bg-white\">\n        <table className=\"w-full min-w-[800px] text-sm\">\n          <thead>\n            <tr className=\"border-b border-gray-200 bg-gray-50\">\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Vreme</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Klijent</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Telefon</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Adresa</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Usluge</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Serviser</th>\n              <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Status</th>\n              {!isPast && (\n                <th className=\"px-4 py-2.5 text-left font-medium text-gray-500\">Akcije</th>\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            {group.bookings.map((b) => (\n              <tr key={b.id} className=\"border-b border-gray-100\">\n                <td className=\"px-4 py-2.5 whitespace-nowrap\">\n                  {b.startTime} - {b.endTime}\n                </td>\n                <td className=\"px-4 py-2.5 font-medium\">{b.customerName}</td>\n                <td className=\"px-4 py-2.5\">{b.customerPhone}</td>\n                <td className=\"px-4 py-2.5 max-w-[200px] truncate\">{b.customerAddress}</td>\n                <td className=\"px-4 py-2.5\">{parseServices(b.services)}</td>\n                <td className=\"px-4 py-2.5\">\n                  {b.user.firstName} {b.user.lastName}\n                </td>\n                <td className=\"px-4 py-2.5\">\n                  <span\n                    className={`inline-block rounded-full px-2 py-0.5 text-xs font-medium ${\n                      statusBadge[b.status] || \"\"\n                    }`}\n                  >\n                    {statusLabel[b.status] || b.status}\n                  </span>\n                </td>\n                {!isPast && (\n                  <td className=\"px-4 py-2.5\">\n                    {b.status === \"confirmed\" && b.date >= today && (\n                      <div className=\"flex gap-1\">\n                        <button\n                          onClick={() => updateStatus(b.id, \"completed\")}\n                          className=\"rounded bg-green-100 px-2 py-1 text-xs font-medium text-green-700 hover:bg-green-200\"\n                        >\n                          Završi\n                        </button>\n                        <button\n                          onClick={() => updateStatus(b.id, \"cancelled\")}\n                          className=\"rounded bg-red-100 px-2 py-1 text-xs font-medium text-red-700 hover:bg-red-200\"\n                        >\n                          Otkaži\n                        </button>\n                      </div>\n                    )}\n                  </td>\n                )}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-brand-200 border-t-brand-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Current/future bookings */}\n      {bookings.length === 0 ? (\n        <div className=\"py-12 text-center text-gray-500\">\n          Nema predstojećih zakazivanja.\n        </div>\n      ) : (\n        grouped.map((group) => renderTable(group, false))\n      )}\n\n      {/* Past bookings section */}\n      <div className=\"border-t border-gray-200 pt-4\">\n        {!showPast ? (\n          <button\n            onClick={() => setShowPast(true)}\n            className=\"flex items-center gap-2 rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-200\"\n          >\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}>\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            Prikaži prošle termine\n          </button>\n        ) : (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3\">\n              <label className=\"text-sm font-medium text-gray-700\">Prošli termini za datum:</label>\n              <input\n                type=\"date\"\n                value={pastDate}\n                max={today}\n                onChange={(e) => setPastDate(e.target.value)}\n                className=\"rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n              <button\n                onClick={() => {\n                  setShowPast(false);\n                  setPastDate(\"\");\n                  setPastBookings([]);\n                }}\n                className=\"rounded-lg bg-gray-100 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200\"\n              >\n                Sakrij\n              </button>\n            </div>\n\n            {pastLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"h-6 w-6 animate-spin rounded-full border-4 border-brand-200 border-t-brand-500\" />\n              </div>\n            ) : pastDate && pastBookings.length === 0 ? (\n              <div className=\"py-6 text-center text-sm text-gray-500\">\n                Nema termina za izabrani datum.\n              </div>\n            ) : (\n              pastGrouped.map((group) => renderTable(group, true))\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/lib/services.ts"],"sourcesContent":["export interface ServiceDefinition {\n  id: string;\n  name: string;\n  price: string;\n  priceValue: number;\n  duration: number; // minutes\n  description: string;\n  features: string[];\n}\n\nexport const SERVICES: ServiceDefinition[] = [\n  {\n    id: \"mali\",\n    name: \"Mali servis\",\n    price: \"4.000\",\n    priceValue: 4000,\n    duration: 30,\n    description: \"Osnovno čišćenje i provera klima uređaja\",\n    features: [\n      \"Čišćenje filtera\",\n      \"Provera nivoa freona\",\n      \"Dezinfekcija unutrašnje jedinice\",\n      \"Vizuelna kontrola sistema\",\n    ],\n  },\n  {\n    id: \"veliki\",\n    name: \"Veliki servis\",\n    price: \"7.000\",\n    priceValue: 7000,\n    duration: 60,\n    description: \"Kompletno čišćenje i održavanje klima uređaja\",\n    features: [\n      \"Kompletno čišćenje unutrašnje jedinice\",\n      \"Čišćenje spoljašnje jedinice\",\n      \"Dopuna freona\",\n      \"Dezinfekcija i antibakterijski tretman\",\n      \"Provera svih komponenti\",\n    ],\n  },\n  {\n    id: \"kondenzator\",\n    name: \"Zamena kondenzatora\",\n    price: \"5.000\",\n    priceValue: 5000,\n    duration: 45,\n    description: \"Dijagnostika i zamena kondenzatora\",\n    features: [\n      \"Dijagnostika kvara\",\n      \"Zamena kondenzatora\",\n      \"Testiranje sistema\",\n      \"Garancija na rad\",\n    ],\n  },\n];\n\nexport function calculateDuration(serviceIds: string[]): number {\n  const durations = serviceIds\n    .map((id) => SERVICES.find((s) => s.id === id)?.duration ?? 0)\n    .filter((d) => d > 0);\n  return durations.length > 0 ? Math.max(...durations) : 0;\n}\n\nexport function validateServiceIds(serviceIds: string[]): boolean {\n  return (\n    serviceIds.length > 0 &&\n    serviceIds.every((id) => SERVICES.some((s) => s.id === id))\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAUO,MAAM,WAAgC;IAC3C;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;IACH;CACD;AAEM,SAAS,kBAAkB,UAAoB;IACpD,MAAM,YAAY,WACf,GAAG,CAAC,CAAC,KAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,YAAY,GAC3D,MAAM,CAAC,CAAC,IAAM,IAAI;IACrB,OAAO,UAAU,MAAM,GAAG,IAAI,KAAK,GAAG,IAAI,aAAa;AACzD;AAEO,SAAS,mBAAmB,UAAoB;IACrD,OACE,WAAW,MAAM,GAAG,KACpB,WAAW,KAAK,CAAC,CAAC,KAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AAE3D"}},
    {"offset": {"line": 605, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/BookingForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { SERVICES } from \"@/lib/services\";\n\ninterface Serviser {\n  id: string;\n  firstName: string;\n  lastName: string;\n}\n\nexport default function BookingForm({\n  onClose,\n  onCreated,\n  prefillServiserId,\n  prefillDate,\n  prefillTime,\n}: {\n  onClose: () => void;\n  onCreated: () => void;\n  prefillServiserId?: string;\n  prefillDate?: string;\n  prefillTime?: string;\n}) {\n  const [servisers, setServisers] = useState<Serviser[]>([]);\n  const [services, setServices] = useState<string[]>([]);\n  const [date, setDate] = useState(prefillDate || \"\");\n  const [startTime, setStartTime] = useState(prefillTime || \"\");\n  const [customerName, setCustomerName] = useState(\"\");\n  const [customerPhone, setCustomerPhone] = useState(\"\");\n  const [customerAddress, setCustomerAddress] = useState(\"\");\n  const [userId, setUserId] = useState(prefillServiserId || \"\");\n  const [customDuration, setCustomDuration] = useState(30);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [currentUserRole, setCurrentUserRole] = useState(\"\");\n  const [currentUserId, setCurrentUserId] = useState(\"\");\n\n  const hasOstalo = services.includes(\"ostalo\");\n\n  useEffect(() => {\n    // Fetch current user info\n    fetch(\"/api/auth/me\")\n      .then((r) => r.json())\n      .then((data) => {\n        if (data.user) {\n          setCurrentUserRole(data.user.role);\n          setCurrentUserId(data.user.id);\n          // If serviser, force userId to self and populate servisers list\n          if (data.user.role === \"serviser\") {\n            setUserId(data.user.id);\n            setServisers([{\n              id: data.user.id,\n              firstName: data.user.firstName,\n              lastName: data.user.lastName,\n            }]);\n          }\n        }\n      });\n  }, []);\n\n  useEffect(() => {\n    if (currentUserRole === \"serviser\") {\n      // Serviser doesn't have access to /api/admin/users, skip\n      return;\n    }\n    fetch(\"/api/admin/users\")\n      .then((r) => {\n        if (!r.ok) return { users: [] };\n        return r.json();\n      })\n      .then((data) => {\n        const s = (data.users || []).filter(\n          (u: Serviser & { role: string; active: boolean }) =>\n            u.role === \"serviser\" && u.active !== false\n        );\n        setServisers(s);\n        if (!userId && s.length > 0) setUserId(s[0].id);\n      });\n  }, [userId, currentUserRole]);\n\n  const toggleService = (id: string) => {\n    setServices((prev) =>\n      prev.includes(id) ? prev.filter((s) => s !== id) : [...prev, id]\n    );\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const res = await fetch(\"/api/admin/bookings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          services,\n          date,\n          startTime,\n          customerName,\n          customerPhone,\n          customerAddress,\n          userId,\n          ...(hasOstalo ? { customDuration } : {}),\n        }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n        setError(data.error || \"Greška\");\n        return;\n      }\n\n      onCreated();\n    } catch {\n      setError(\"Greška pri povezivanju\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n      <div className=\"w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-6 shadow-xl\">\n        <h3 className=\"mb-4 text-lg font-bold text-gray-900\">\n          Novo zakazivanje\n        </h3>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Usluge\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {SERVICES.map((s) => (\n                <button\n                  key={s.id}\n                  type=\"button\"\n                  onClick={() => toggleService(s.id)}\n                  className={`rounded-full px-3 py-1 text-sm font-medium transition-colors ${\n                    services.includes(s.id)\n                      ? \"bg-brand-500 text-white\"\n                      : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                  }`}\n                >\n                  {s.name}\n                </button>\n              ))}\n              <button\n                type=\"button\"\n                onClick={() => toggleService(\"ostalo\")}\n                className={`rounded-full px-3 py-1 text-sm font-medium transition-colors ${\n                  hasOstalo\n                    ? \"bg-brand-500 text-white\"\n                    : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                }`}\n              >\n                Ostalo\n              </button>\n            </div>\n          </div>\n\n          {hasOstalo && (\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Trajanje (minuti)\n              </label>\n              <input\n                type=\"number\"\n                value={customDuration}\n                onChange={(e) => setCustomDuration(Number(e.target.value))}\n                min={15}\n                step={15}\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Datum\n              </label>\n              <input\n                type=\"date\"\n                value={date}\n                onChange={(e) => setDate(e.target.value)}\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Vreme\n              </label>\n              <input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n                step=\"1800\"\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Serviser\n            </label>\n            <select\n              value={userId}\n              onChange={(e) => setUserId(e.target.value)}\n              disabled={currentUserRole === \"serviser\"}\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500 disabled:bg-gray-100 disabled:text-gray-500\"\n            >\n              {currentUserRole === \"serviser\"\n                ? servisers\n                    .filter((s) => s.id === currentUserId)\n                    .map((s) => (\n                      <option key={s.id} value={s.id}>\n                        {s.firstName} {s.lastName}\n                      </option>\n                    ))\n                : servisers.map((s) => (\n                    <option key={s.id} value={s.id}>\n                      {s.firstName} {s.lastName}\n                    </option>\n                  ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Ime i prezime\n            </label>\n            <input\n              type=\"text\"\n              value={customerName}\n              onChange={(e) => setCustomerName(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Telefon\n            </label>\n            <input\n              type=\"tel\"\n              value={customerPhone}\n              onChange={(e) => setCustomerPhone(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Adresa\n            </label>\n            <input\n              type=\"text\"\n              value={customerAddress}\n              onChange={(e) => setCustomerAddress(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          {error && (\n            <div className=\"rounded-lg bg-red-50 p-3 text-sm text-red-600\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <button\n              type=\"submit\"\n              disabled={loading || services.length === 0}\n              className=\"flex-1 rounded-lg bg-brand-500 py-2.5 text-sm font-semibold text-white hover:bg-brand-600 disabled:bg-gray-300\"\n            >\n              {loading ? \"Čuvanje...\" : \"Zakaži\"}\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 rounded-lg bg-gray-100 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-200\"\n            >\n              Otkaži\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/app/admin/bookings/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport BookingsList from \"@/components/admin/BookingsList\";\nimport BookingForm from \"@/components/admin/BookingForm\";\n\nexport default function BookingsPage() {\n  const [showForm, setShowForm] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  return (\n    <div>\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Zakazivanja</h1>\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-600\"\n        >\n          + Novo zakazivanje\n        </button>\n      </div>\n\n      <BookingsList refreshKey={refreshKey} />\n\n      {showForm && (\n        <BookingForm\n          onClose={() => setShowForm(false)}\n          onCreated={() => {\n            setShowForm(false);\n            setRefreshKey((k) => k + 1);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBACC,SAAS,IAAM,YAAY;wBAC3B,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC,sJAAY;gBAAC,YAAY;;;;;;YAEzB,0BACC,8OAAC,qJAAW;gBACV,SAAS,IAAM,YAAY;gBAC3B,WAAW;oBACT,YAAY;oBACZ,cAAc,CAAC,IAAM,IAAI;gBAC3B;;;;;;;;;;;;AAKV"}}]
}