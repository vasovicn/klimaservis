{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/DateCarousel.tsx"],"sourcesContent":["\"use client\";\n\nconst DAYS_SERBIAN = [\"Ned\", \"Pon\", \"Uto\", \"Sre\", \"Čet\", \"Pet\", \"Sub\"];\nconst MONTHS_SHORT = [\n  \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\",\n  \"Jul\", \"Avg\", \"Sep\", \"Okt\", \"Nov\", \"Dec\",\n];\n\nfunction formatDateStr(d: Date) {\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\n\nfunction isToday(d: Date) {\n  const t = new Date();\n  return (\n    d.getFullYear() === t.getFullYear() &&\n    d.getMonth() === t.getMonth() &&\n    d.getDate() === t.getDate()\n  );\n}\n\nexport default function DateCarousel({\n  selectedDate,\n  onSelect,\n}: {\n  selectedDate: string;\n  onSelect: (date: string) => void;\n}) {\n  const today = new Date();\n  const selectedDateObj = new Date(selectedDate + \"T00:00:00\");\n\n  // Show 7 days centered on selection, but start from today or earlier\n  const startOffset = Math.floor(\n    (selectedDateObj.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)\n  );\n  const baseOffset = Math.max(0, startOffset - 3);\n\n  const dates: Date[] = [];\n  for (let i = 0; i < 7; i++) {\n    const d = new Date(today);\n    d.setDate(today.getDate() + baseOffset + i);\n    dates.push(d);\n  }\n\n  const goBack = () => {\n    const d = new Date(selectedDateObj);\n    d.setDate(d.getDate() - 1);\n    if (d >= today) onSelect(formatDateStr(d));\n  };\n\n  const goForward = () => {\n    const d = new Date(selectedDateObj);\n    d.setDate(d.getDate() + 1);\n    onSelect(formatDateStr(d));\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <button\n        onClick={goBack}\n        className=\"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600\"\n      >\n        <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n        </svg>\n      </button>\n\n      <div className=\"flex gap-2 overflow-x-auto\">\n        {dates.map((d) => {\n          const dateStr = formatDateStr(d);\n          const selected = dateStr === selectedDate;\n          const todayClass = isToday(d);\n\n          return (\n            <button\n              key={dateStr}\n              onClick={() => onSelect(dateStr)}\n              className={`flex min-w-[4.5rem] flex-col items-center rounded-xl px-3 py-2 text-sm transition-all ${\n                selected\n                  ? \"bg-brand-500 text-white shadow-md\"\n                  : todayClass\n                    ? \"border-2 border-brand-500 bg-white text-brand-600\"\n                    : \"bg-white text-gray-600 hover:bg-gray-50\"\n              }`}\n            >\n              <span className=\"text-xs font-medium\">\n                {DAYS_SERBIAN[d.getDay()]}\n              </span>\n              <span className=\"text-lg font-bold\">{d.getDate()}</span>\n              <span className=\"text-xs\">{MONTHS_SHORT[d.getMonth()]}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      <button\n        onClick={goForward}\n        className=\"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600\"\n      >\n        <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\n        </svg>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEA,MAAM,eAAe;IAAC;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;CAAM;AACtE,MAAM,eAAe;IACnB;IAAO;IAAO;IAAO;IAAO;IAAO;IACnC;IAAO;IAAO;IAAO;IAAO;IAAO;CACpC;AAED,SAAS,cAAc,CAAO;IAC5B,MAAM,IAAI,EAAE,WAAW;IACvB,MAAM,IAAI,OAAO,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IAC/C,MAAM,MAAM,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC5C,OAAO,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK;AAC3B;AAEA,SAAS,QAAQ,CAAO;IACtB,MAAM,IAAI,IAAI;IACd,OACE,EAAE,WAAW,OAAO,EAAE,WAAW,MACjC,EAAE,QAAQ,OAAO,EAAE,QAAQ,MAC3B,EAAE,OAAO,OAAO,EAAE,OAAO;AAE7B;AAEe,SAAS,aAAa,EACnC,YAAY,EACZ,QAAQ,EAIT;IACC,MAAM,QAAQ,IAAI;IAClB,MAAM,kBAAkB,IAAI,KAAK,eAAe;IAEhD,qEAAqE;IACrE,MAAM,cAAc,KAAK,KAAK,CAC5B,CAAC,gBAAgB,OAAO,KAAK,MAAM,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAEtE,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,cAAc;IAE7C,MAAM,QAAgB,EAAE;IACxB,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,MAAM,IAAI,IAAI,KAAK;QACnB,EAAE,OAAO,CAAC,MAAM,OAAO,KAAK,aAAa;QACzC,MAAM,IAAI,CAAC;IACb;IAEA,MAAM,SAAS;QACb,MAAM,IAAI,IAAI,KAAK;QACnB,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;QACxB,IAAI,KAAK,OAAO,SAAS,cAAc;IACzC;IAEA,MAAM,YAAY;QAChB,MAAM,IAAI,IAAI,KAAK;QACnB,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;QACxB,SAAS,cAAc;IACzB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,8OAAC;oBAAI,WAAU;oBAAU,MAAK;oBAAO,SAAQ;oBAAY,QAAO;oBAAe,aAAa;8BAC1F,cAAA,8OAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,GAAE;;;;;;;;;;;;;;;;0BAIzD,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,UAAU,cAAc;oBAC9B,MAAM,WAAW,YAAY;oBAC7B,MAAM,aAAa,QAAQ;oBAE3B,qBACE,8OAAC;wBAEC,SAAS,IAAM,SAAS;wBACxB,WAAW,CAAC,sFAAsF,EAChG,WACI,sCACA,aACE,sDACA,2CACN;;0CAEF,8OAAC;gCAAK,WAAU;0CACb,YAAY,CAAC,EAAE,MAAM,GAAG;;;;;;0CAE3B,8OAAC;gCAAK,WAAU;0CAAqB,EAAE,OAAO;;;;;;0CAC9C,8OAAC;gCAAK,WAAU;0CAAW,YAAY,CAAC,EAAE,QAAQ,GAAG;;;;;;;uBAdhD;;;;;gBAiBX;;;;;;0BAGF,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,8OAAC;oBAAI,WAAU;oBAAU,MAAK;oBAAO,SAAQ;oBAAY,QAAO;oBAAe,aAAa;8BAC1F,cAAA,8OAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,GAAE;;;;;;;;;;;;;;;;;;;;;;AAK/D"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/BookingBlock.tsx"],"sourcesContent":["\"use client\";\n\ninterface BookingBlockProps {\n  booking: {\n    id: string;\n    customerName: string;\n    customerPhone: string;\n    services: string;\n    startTime: string;\n    endTime: string;\n    status: string;\n    duration: number;\n  };\n  rowHeight: number;\n  onClick?: () => void;\n}\n\nfunction timeToSlotCount(startTime: string, endTime: string): number {\n  const [sh, sm] = startTime.split(\":\").map(Number);\n  const [eh, em] = endTime.split(\":\").map(Number);\n  const startMin = sh * 60 + sm;\n  const endMin = eh * 60 + em;\n  return Math.max(Math.round((endMin - startMin) / 30), 1);\n}\n\nconst statusColors: Record<string, string> = {\n  confirmed: \"bg-brand-500 border-brand-600 text-white\",\n  completed: \"bg-green-500 border-green-600 text-white\",\n};\n\nexport default function BookingBlock({ booking, rowHeight, onClick }: BookingBlockProps) {\n  const span = timeToSlotCount(booking.startTime, booking.endTime);\n\n  let serviceNames: string;\n  try {\n    const ids = JSON.parse(booking.services) as string[];\n    const nameMap: Record<string, string> = {\n      mali: \"Mali servis\",\n      veliki: \"Veliki servis\",\n      kondenzator: \"Kondenzator\",\n      ostalo: \"Ostalo\",\n    };\n    serviceNames = ids.map((id) => nameMap[id] || id).join(\", \");\n  } catch {\n    serviceNames = booking.services;\n  }\n\n  return (\n    <div\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick?.();\n      }}\n      className={`absolute inset-x-1 top-0 cursor-pointer overflow-hidden rounded-lg border px-2 py-1 text-xs shadow-sm transition-opacity hover:opacity-90 ${\n        statusColors[booking.status] || statusColors.confirmed\n      }`}\n      style={{\n        height: `${span * rowHeight}px`,\n        zIndex: 10,\n      }}\n    >\n      <div className=\"font-semibold truncate\">{booking.customerName}</div>\n      <div className=\"truncate opacity-80\">{serviceNames}</div>\n      <div className=\"opacity-80\">\n        {booking.startTime} - {booking.endTime}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAiBA,SAAS,gBAAgB,SAAiB,EAAE,OAAe;IACzD,MAAM,CAAC,IAAI,GAAG,GAAG,UAAU,KAAK,CAAC,KAAK,GAAG,CAAC;IAC1C,MAAM,CAAC,IAAI,GAAG,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IACxC,MAAM,WAAW,KAAK,KAAK;IAC3B,MAAM,SAAS,KAAK,KAAK;IACzB,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,SAAS,QAAQ,IAAI,KAAK;AACxD;AAEA,MAAM,eAAuC;IAC3C,WAAW;IACX,WAAW;AACb;AAEe,SAAS,aAAa,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAqB;IACrF,MAAM,OAAO,gBAAgB,QAAQ,SAAS,EAAE,QAAQ,OAAO;IAE/D,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,KAAK,KAAK,CAAC,QAAQ,QAAQ;QACvC,MAAM,UAAkC;YACtC,MAAM;YACN,QAAQ;YACR,aAAa;YACb,QAAQ;QACV;QACA,eAAe,IAAI,GAAG,CAAC,CAAC,KAAO,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC;IACzD,EAAE,OAAM;QACN,eAAe,QAAQ,QAAQ;IACjC;IAEA,qBACE,8OAAC;QACC,SAAS,CAAC;YACR,EAAE,eAAe;YACjB;QACF;QACA,WAAW,CAAC,0IAA0I,EACpJ,YAAY,CAAC,QAAQ,MAAM,CAAC,IAAI,aAAa,SAAS,EACtD;QACF,OAAO;YACL,QAAQ,GAAG,OAAO,UAAU,EAAE,CAAC;YAC/B,QAAQ;QACV;;0BAEA,8OAAC;gBAAI,WAAU;0BAA0B,QAAQ,YAAY;;;;;;0BAC7D,8OAAC;gBAAI,WAAU;0BAAuB;;;;;;0BACtC,8OAAC;gBAAI,WAAU;;oBACZ,QAAQ,SAAS;oBAAC;oBAAI,QAAQ,OAAO;;;;;;;;;;;;;AAI9C"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/ScheduleGrid.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport BookingBlock from \"./BookingBlock\";\n\ninterface Serviser {\n  id: string;\n  firstName: string;\n  lastName: string;\n}\n\ninterface Booking {\n  id: string;\n  customerName: string;\n  customerPhone: string;\n  customerAddress: string;\n  services: string;\n  startTime: string;\n  endTime: string;\n  status: string;\n  duration: number;\n  userId: string;\n}\n\nconst TIME_SLOTS: string[] = [];\nfor (let h = 7; h < 22; h++) {\n  TIME_SLOTS.push(`${String(h).padStart(2, \"0\")}:00`);\n  TIME_SLOTS.push(`${String(h).padStart(2, \"0\")}:30`);\n}\n\nconst ROW_HEIGHT = 40; // px per 30-min slot\n\nexport default function ScheduleGrid({\n  date,\n  onCellClick,\n}: {\n  date: string;\n  onCellClick?: (serviserId: string, time: string) => void;\n}) {\n  const [servisers, setServisers] = useState<Serviser[]>([]);\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [editBooking, setEditBooking] = useState<Booking | null>(null);\n\n  // Editable form state\n  const [editName, setEditName] = useState(\"\");\n  const [editPhone, setEditPhone] = useState(\"\");\n  const [editAddress, setEditAddress] = useState(\"\");\n  const [editSaving, setEditSaving] = useState(false);\n\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    fetch(`/api/admin/schedule?date=${date}`)\n      .then((r) => r.json())\n      .then((data) => {\n        setServisers(data.servisers || []);\n        setBookings(data.bookings || []);\n      })\n      .finally(() => setLoading(false));\n  }, [date]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const openEditModal = (b: Booking) => {\n    setEditBooking(b);\n    setEditName(b.customerName);\n    setEditPhone(b.customerPhone);\n    setEditAddress(b.customerAddress);\n  };\n\n  const handleSave = async () => {\n    if (!editBooking) return;\n    setEditSaving(true);\n    await fetch(`/api/admin/bookings/${editBooking.id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        customerName: editName,\n        customerPhone: editPhone,\n        customerAddress: editAddress,\n      }),\n    });\n    setEditSaving(false);\n    setEditBooking(null);\n    fetchData();\n  };\n\n  const handleCancel = async () => {\n    if (!editBooking) return;\n    await fetch(`/api/admin/bookings/${editBooking.id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status: \"cancelled\" }),\n    });\n    setEditBooking(null);\n    fetchData();\n  };\n\n  const parseServices = (s: string) => {\n    try {\n      const ids = JSON.parse(s) as string[];\n      const map: Record<string, string> = {\n        mali: \"Mali servis\",\n        veliki: \"Veliki servis\",\n        kondenzator: \"Kondenzator\",\n        ostalo: \"Ostalo\",\n      };\n      return ids.map((id) => map[id] || id).join(\", \");\n    } catch {\n      return s;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-brand-200 border-t-brand-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"overflow-x-auto rounded-xl border border-gray-200 bg-white\">\n        <table className=\"w-full min-w-[600px]\">\n          <thead>\n            <tr className=\"border-b border-gray-200 bg-gray-50\">\n              <th className=\"w-20 px-3 py-2 text-left text-xs font-medium text-gray-500\">\n                Vreme\n              </th>\n              {servisers.map((s) => (\n                <th\n                  key={s.id}\n                  className=\"px-3 py-2 text-center text-xs font-medium text-gray-500\"\n                >\n                  {s.firstName} {s.lastName}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {TIME_SLOTS.map((time, rowIdx) => (\n              <tr\n                key={time}\n                className={`border-b border-gray-100 ${\n                  rowIdx % 2 === 0 ? \"bg-white\" : \"bg-gray-50/50\"\n                }`}\n              >\n                <td\n                  className=\"px-3 text-xs text-gray-500 whitespace-nowrap\"\n                  style={{ height: `${ROW_HEIGHT}px` }}\n                >\n                  {time}\n                </td>\n                {servisers.map((s) => {\n                  const cellBookings = bookings.filter(\n                    (b) => b.userId === s.id && b.startTime === time\n                  );\n                  return (\n                    <td\n                      key={s.id}\n                      className=\"relative cursor-pointer px-1\"\n                      style={{ height: `${ROW_HEIGHT}px` }}\n                      onClick={() =>\n                        cellBookings.length === 0 &&\n                        onCellClick?.(s.id, time)\n                      }\n                    >\n                      {cellBookings.map((b) => (\n                        <BookingBlock\n                          key={b.id}\n                          booking={b}\n                          rowHeight={ROW_HEIGHT}\n                          onClick={() => openEditModal(b)}\n                        />\n                      ))}\n                    </td>\n                  );\n                })}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Editable booking modal */}\n      {editBooking && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n          <div className=\"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl\">\n            <h3 className=\"mb-4 text-lg font-bold text-gray-900\">\n              Detalji zakazivanja\n            </h3>\n\n            <div className=\"space-y-3\">\n              {/* Read-only info */}\n              <div className=\"rounded-lg bg-gray-50 p-3 space-y-1 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Usluge:</span>\n                  <span className=\"font-medium\">{parseServices(editBooking.services)}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Vreme:</span>\n                  <span className=\"font-medium\">\n                    {editBooking.startTime} - {editBooking.endTime}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Trajanje:</span>\n                  <span className=\"font-medium\">{editBooking.duration} min</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Status:</span>\n                  <span className={`font-medium ${\n                    editBooking.status === \"confirmed\" ? \"text-brand-600\" : \"text-green-600\"\n                  }`}>\n                    {editBooking.status === \"confirmed\" ? \"Potvrđeno\" : \"Završeno\"}\n                  </span>\n                </div>\n              </div>\n\n              {/* Editable fields */}\n              <div>\n                <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                  Ime i prezime\n                </label>\n                <input\n                  type=\"text\"\n                  value={editName}\n                  onChange={(e) => setEditName(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n                />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                  Telefon\n                </label>\n                <input\n                  type=\"tel\"\n                  value={editPhone}\n                  onChange={(e) => setEditPhone(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n                />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                  Adresa\n                </label>\n                <input\n                  type=\"text\"\n                  value={editAddress}\n                  onChange={(e) => setEditAddress(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n                />\n              </div>\n            </div>\n\n            <div className=\"mt-5 flex gap-2\">\n              <button\n                onClick={handleSave}\n                disabled={editSaving}\n                className=\"flex-1 rounded-lg bg-brand-500 py-2.5 text-sm font-semibold text-white hover:bg-brand-600 disabled:bg-gray-300\"\n              >\n                {editSaving ? \"Čuvanje...\" : \"Sačuvaj\"}\n              </button>\n              {editBooking.status === \"confirmed\" && (() => {\n                const t = new Date();\n                const todayStr = `${t.getFullYear()}-${String(t.getMonth() + 1).padStart(2, \"0\")}-${String(t.getDate()).padStart(2, \"0\")}`;\n                return date >= todayStr;\n              })() && (\n                <button\n                  onClick={handleCancel}\n                  className=\"flex-1 rounded-lg bg-red-500 py-2.5 text-sm font-semibold text-white hover:bg-red-600\"\n                >\n                  Otkaži termin\n                </button>\n              )}\n              <button\n                onClick={() => setEditBooking(null)}\n                className=\"flex-1 rounded-lg bg-gray-100 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-200\"\n              >\n                Zatvori\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAwBA,MAAM,aAAuB,EAAE;AAC/B,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;IAC3B,WAAW,IAAI,CAAC,GAAG,OAAO,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG,CAAC;IAClD,WAAW,IAAI,CAAC,GAAG,OAAO,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG,CAAC;AACpD;AAEA,MAAM,aAAa,IAAI,qBAAqB;AAE7B,SAAS,aAAa,EACnC,IAAI,EACJ,WAAW,EAIZ;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAiB;IAE/D,sBAAsB;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,YAAY,IAAA,oNAAW,EAAC;QAC5B,WAAW;QACX,MAAM,CAAC,yBAAyB,EAAE,MAAM,EACrC,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,IAClB,IAAI,CAAC,CAAC;YACL,aAAa,KAAK,SAAS,IAAI,EAAE;YACjC,YAAY,KAAK,QAAQ,IAAI,EAAE;QACjC,GACC,OAAO,CAAC,IAAM,WAAW;IAC9B,GAAG;QAAC;KAAK;IAET,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,gBAAgB,CAAC;QACrB,eAAe;QACf,YAAY,EAAE,YAAY;QAC1B,aAAa,EAAE,aAAa;QAC5B,eAAe,EAAE,eAAe;IAClC;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,aAAa;QAClB,cAAc;QACd,MAAM,MAAM,CAAC,oBAAoB,EAAE,YAAY,EAAE,EAAE,EAAE;YACnD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,cAAc;gBACd,eAAe;gBACf,iBAAiB;YACnB;QACF;QACA,cAAc;QACd,eAAe;QACf;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,aAAa;QAClB,MAAM,MAAM,CAAC,oBAAoB,EAAE,YAAY,EAAE,EAAE,EAAE;YACnD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,QAAQ;YAAY;QAC7C;QACA,eAAe;QACf;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI;YACF,MAAM,MAAM,KAAK,KAAK,CAAC;YACvB,MAAM,MAA8B;gBAClC,MAAM;gBACN,QAAQ;gBACR,aAAa;gBACb,QAAQ;YACV;YACA,OAAO,IAAI,GAAG,CAAC,CAAC,KAAO,GAAG,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC;QAC7C,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;sCACC,cAAA,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAG,WAAU;kDAA6D;;;;;;oCAG1E,UAAU,GAAG,CAAC,CAAC,kBACd,8OAAC;4CAEC,WAAU;;gDAET,EAAE,SAAS;gDAAC;gDAAE,EAAE,QAAQ;;2CAHpB,EAAE,EAAE;;;;;;;;;;;;;;;;sCAQjB,8OAAC;sCACE,WAAW,GAAG,CAAC,CAAC,MAAM,uBACrB,8OAAC;oCAEC,WAAW,CAAC,yBAAyB,EACnC,SAAS,MAAM,IAAI,aAAa,iBAChC;;sDAEF,8OAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,QAAQ,GAAG,WAAW,EAAE,CAAC;4CAAC;sDAElC;;;;;;wCAEF,UAAU,GAAG,CAAC,CAAC;4CACd,MAAM,eAAe,SAAS,MAAM,CAClC,CAAC,IAAM,EAAE,MAAM,KAAK,EAAE,EAAE,IAAI,EAAE,SAAS,KAAK;4CAE9C,qBACE,8OAAC;gDAEC,WAAU;gDACV,OAAO;oDAAE,QAAQ,GAAG,WAAW,EAAE,CAAC;gDAAC;gDACnC,SAAS,IACP,aAAa,MAAM,KAAK,KACxB,cAAc,EAAE,EAAE,EAAE;0DAGrB,aAAa,GAAG,CAAC,CAAC,kBACjB,8OAAC,sJAAY;wDAEX,SAAS;wDACT,WAAW;wDACX,SAAS,IAAM,cAAc;uDAHxB,EAAE,EAAE;;;;;+CAVR,EAAE,EAAE;;;;;wCAkBf;;mCAnCK;;;;;;;;;;;;;;;;;;;;;YA2Cd,6BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCAIrD,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;oDAAK,WAAU;8DAAe,cAAc,YAAY,QAAQ;;;;;;;;;;;;sDAEnE,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;oDAAK,WAAU;;wDACb,YAAY,SAAS;wDAAC;wDAAI,YAAY,OAAO;;;;;;;;;;;;;sDAGlD,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;oDAAK,WAAU;;wDAAe,YAAY,QAAQ;wDAAC;;;;;;;;;;;;;sDAEtD,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;oDAAK,WAAW,CAAC,YAAY,EAC5B,YAAY,MAAM,KAAK,cAAc,mBAAmB,kBACxD;8DACC,YAAY,MAAM,KAAK,cAAc,cAAc;;;;;;;;;;;;;;;;;;8CAM1D,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8OAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAU;;;;;;;;;;;;8CAGd,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8OAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;4CAC5C,WAAU;;;;;;;;;;;;8CAGd,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8OAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4CAC9C,WAAU;;;;;;;;;;;;;;;;;;sCAKhB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAU;8CAET,aAAa,eAAe;;;;;;gCAE9B,YAAY,MAAM,KAAK,eAAe,CAAC;oCACtC,MAAM,IAAI,IAAI;oCACd,MAAM,WAAW,GAAG,EAAE,WAAW,GAAG,CAAC,EAAE,OAAO,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG,MAAM;oCAC1H,OAAO,QAAQ;gCACjB,CAAC,qBACC,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAIH,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/lib/services.ts"],"sourcesContent":["export interface ServiceDefinition {\n  id: string;\n  name: string;\n  price: string;\n  priceValue: number;\n  duration: number; // minutes\n  description: string;\n  features: string[];\n}\n\nexport const SERVICES: ServiceDefinition[] = [\n  {\n    id: \"mali\",\n    name: \"Mali servis\",\n    price: \"4.000\",\n    priceValue: 4000,\n    duration: 30,\n    description: \"Osnovno čišćenje i provera klima uređaja\",\n    features: [\n      \"Čišćenje filtera\",\n      \"Provera nivoa freona\",\n      \"Dezinfekcija unutrašnje jedinice\",\n      \"Vizuelna kontrola sistema\",\n    ],\n  },\n  {\n    id: \"veliki\",\n    name: \"Veliki servis\",\n    price: \"7.000\",\n    priceValue: 7000,\n    duration: 60,\n    description: \"Kompletno čišćenje i održavanje klima uređaja\",\n    features: [\n      \"Kompletno čišćenje unutrašnje jedinice\",\n      \"Čišćenje spoljašnje jedinice\",\n      \"Dopuna freona\",\n      \"Dezinfekcija i antibakterijski tretman\",\n      \"Provera svih komponenti\",\n    ],\n  },\n  {\n    id: \"kondenzator\",\n    name: \"Zamena kondenzatora\",\n    price: \"5.000\",\n    priceValue: 5000,\n    duration: 45,\n    description: \"Dijagnostika i zamena kondenzatora\",\n    features: [\n      \"Dijagnostika kvara\",\n      \"Zamena kondenzatora\",\n      \"Testiranje sistema\",\n      \"Garancija na rad\",\n    ],\n  },\n];\n\nexport function calculateDuration(serviceIds: string[]): number {\n  const durations = serviceIds\n    .map((id) => SERVICES.find((s) => s.id === id)?.duration ?? 0)\n    .filter((d) => d > 0);\n  return durations.length > 0 ? Math.max(...durations) : 0;\n}\n\nexport function validateServiceIds(serviceIds: string[]): boolean {\n  return (\n    serviceIds.length > 0 &&\n    serviceIds.every((id) => SERVICES.some((s) => s.id === id))\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAUO,MAAM,WAAgC;IAC3C;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,YAAY;QACZ,UAAU;QACV,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;IACH;CACD;AAEM,SAAS,kBAAkB,UAAoB;IACpD,MAAM,YAAY,WACf,GAAG,CAAC,CAAC,KAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,YAAY,GAC3D,MAAM,CAAC,CAAC,IAAM,IAAI;IACrB,OAAO,UAAU,MAAM,GAAG,IAAI,KAAK,GAAG,IAAI,aAAa;AACzD;AAEO,SAAS,mBAAmB,UAAoB;IACrD,OACE,WAAW,MAAM,GAAG,KACpB,WAAW,KAAK,CAAC,CAAC,KAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AAE3D"}},
    {"offset": {"line": 815, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/components/admin/BookingForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { SERVICES } from \"@/lib/services\";\n\ninterface Serviser {\n  id: string;\n  firstName: string;\n  lastName: string;\n}\n\nexport default function BookingForm({\n  onClose,\n  onCreated,\n  prefillServiserId,\n  prefillDate,\n  prefillTime,\n}: {\n  onClose: () => void;\n  onCreated: () => void;\n  prefillServiserId?: string;\n  prefillDate?: string;\n  prefillTime?: string;\n}) {\n  const [servisers, setServisers] = useState<Serviser[]>([]);\n  const [services, setServices] = useState<string[]>([]);\n  const [date, setDate] = useState(prefillDate || \"\");\n  const [startTime, setStartTime] = useState(prefillTime || \"\");\n  const [customerName, setCustomerName] = useState(\"\");\n  const [customerPhone, setCustomerPhone] = useState(\"\");\n  const [customerAddress, setCustomerAddress] = useState(\"\");\n  const [userId, setUserId] = useState(prefillServiserId || \"\");\n  const [customDuration, setCustomDuration] = useState(30);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [currentUserRole, setCurrentUserRole] = useState(\"\");\n  const [currentUserId, setCurrentUserId] = useState(\"\");\n\n  const hasOstalo = services.includes(\"ostalo\");\n\n  useEffect(() => {\n    // Fetch current user info\n    fetch(\"/api/auth/me\")\n      .then((r) => r.json())\n      .then((data) => {\n        if (data.user) {\n          setCurrentUserRole(data.user.role);\n          setCurrentUserId(data.user.id);\n          // If serviser, force userId to self and populate servisers list\n          if (data.user.role === \"serviser\") {\n            setUserId(data.user.id);\n            setServisers([{\n              id: data.user.id,\n              firstName: data.user.firstName,\n              lastName: data.user.lastName,\n            }]);\n          }\n        }\n      });\n  }, []);\n\n  useEffect(() => {\n    if (currentUserRole === \"serviser\") {\n      // Serviser doesn't have access to /api/admin/users, skip\n      return;\n    }\n    fetch(\"/api/admin/users\")\n      .then((r) => {\n        if (!r.ok) return { users: [] };\n        return r.json();\n      })\n      .then((data) => {\n        const s = (data.users || []).filter(\n          (u: Serviser & { role: string; active: boolean }) =>\n            u.role === \"serviser\" && u.active !== false\n        );\n        setServisers(s);\n        if (!userId && s.length > 0) setUserId(s[0].id);\n      });\n  }, [userId, currentUserRole]);\n\n  const toggleService = (id: string) => {\n    setServices((prev) =>\n      prev.includes(id) ? prev.filter((s) => s !== id) : [...prev, id]\n    );\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const res = await fetch(\"/api/admin/bookings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          services,\n          date,\n          startTime,\n          customerName,\n          customerPhone,\n          customerAddress,\n          userId,\n          ...(hasOstalo ? { customDuration } : {}),\n        }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n        setError(data.error || \"Greška\");\n        return;\n      }\n\n      onCreated();\n    } catch {\n      setError(\"Greška pri povezivanju\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n      <div className=\"w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-6 shadow-xl\">\n        <h3 className=\"mb-4 text-lg font-bold text-gray-900\">\n          Novo zakazivanje\n        </h3>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Usluge\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {SERVICES.map((s) => (\n                <button\n                  key={s.id}\n                  type=\"button\"\n                  onClick={() => toggleService(s.id)}\n                  className={`rounded-full px-3 py-1 text-sm font-medium transition-colors ${\n                    services.includes(s.id)\n                      ? \"bg-brand-500 text-white\"\n                      : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                  }`}\n                >\n                  {s.name}\n                </button>\n              ))}\n              <button\n                type=\"button\"\n                onClick={() => toggleService(\"ostalo\")}\n                className={`rounded-full px-3 py-1 text-sm font-medium transition-colors ${\n                  hasOstalo\n                    ? \"bg-brand-500 text-white\"\n                    : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                }`}\n              >\n                Ostalo\n              </button>\n            </div>\n          </div>\n\n          {hasOstalo && (\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Trajanje (minuti)\n              </label>\n              <input\n                type=\"number\"\n                value={customDuration}\n                onChange={(e) => setCustomDuration(Number(e.target.value))}\n                min={15}\n                step={15}\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Datum\n              </label>\n              <input\n                type=\"date\"\n                value={date}\n                onChange={(e) => setDate(e.target.value)}\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n            <div>\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                Vreme\n              </label>\n              <input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n                step=\"1800\"\n                required\n                className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Serviser\n            </label>\n            <select\n              value={userId}\n              onChange={(e) => setUserId(e.target.value)}\n              disabled={currentUserRole === \"serviser\"}\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500 disabled:bg-gray-100 disabled:text-gray-500\"\n            >\n              {currentUserRole === \"serviser\"\n                ? servisers\n                    .filter((s) => s.id === currentUserId)\n                    .map((s) => (\n                      <option key={s.id} value={s.id}>\n                        {s.firstName} {s.lastName}\n                      </option>\n                    ))\n                : servisers.map((s) => (\n                    <option key={s.id} value={s.id}>\n                      {s.firstName} {s.lastName}\n                    </option>\n                  ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Ime i prezime\n            </label>\n            <input\n              type=\"text\"\n              value={customerName}\n              onChange={(e) => setCustomerName(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Telefon\n            </label>\n            <input\n              type=\"tel\"\n              value={customerPhone}\n              onChange={(e) => setCustomerPhone(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n              Adresa\n            </label>\n            <input\n              type=\"text\"\n              value={customerAddress}\n              onChange={(e) => setCustomerAddress(e.target.value)}\n              required\n              className=\"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 outline-none focus:border-brand-500\"\n            />\n          </div>\n\n          {error && (\n            <div className=\"rounded-lg bg-red-50 p-3 text-sm text-red-600\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <button\n              type=\"submit\"\n              disabled={loading || services.length === 0}\n              className=\"flex-1 rounded-lg bg-brand-500 py-2.5 text-sm font-semibold text-white hover:bg-brand-600 disabled:bg-gray-300\"\n            >\n              {loading ? \"Čuvanje...\" : \"Zakaži\"}\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 rounded-lg bg-gray-100 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-200\"\n            >\n              Otkaži\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nikola/Desktop/klimaservis/src/app/admin/schedule/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport DateCarousel from \"@/components/admin/DateCarousel\";\nimport ScheduleGrid from \"@/components/admin/ScheduleGrid\";\nimport BookingForm from \"@/components/admin/BookingForm\";\n\nfunction todayStr() {\n  const t = new Date();\n  const y = t.getFullYear();\n  const m = String(t.getMonth() + 1).padStart(2, \"0\");\n  const d = String(t.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${d}`;\n}\n\nexport default function SchedulePage() {\n  const [date, setDate] = useState(todayStr());\n  const [showForm, setShowForm] = useState(false);\n  const [prefill, setPrefill] = useState<{\n    serviserId?: string;\n    time?: string;\n  }>({});\n  const [key, setKey] = useState(0);\n\n  const handleCellClick = (serviserId: string, time: string) => {\n    setPrefill({ serviserId, time });\n    setShowForm(true);\n  };\n\n  const handleCreated = () => {\n    setShowForm(false);\n    setPrefill({});\n    setKey((k) => k + 1);\n  };\n\n  return (\n    <div>\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Raspored</h1>\n        <button\n          onClick={() => {\n            setPrefill({});\n            setShowForm(true);\n          }}\n          className=\"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-600\"\n        >\n          + Novo zakazivanje\n        </button>\n      </div>\n\n      <div className=\"mb-6\">\n        <DateCarousel selectedDate={date} onSelect={setDate} />\n      </div>\n\n      <ScheduleGrid\n        key={`${date}-${key}`}\n        date={date}\n        onCellClick={handleCellClick}\n      />\n\n      {showForm && (\n        <BookingForm\n          onClose={() => setShowForm(false)}\n          onCreated={handleCreated}\n          prefillServiserId={prefill.serviserId}\n          prefillDate={date}\n          prefillTime={prefill.time}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,SAAS;IACP,MAAM,IAAI,IAAI;IACd,MAAM,IAAI,EAAE,WAAW;IACvB,MAAM,IAAI,OAAO,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IAC/C,MAAM,IAAI,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC1C,OAAO,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,GAAG;AACzB;AAEe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAGnC,CAAC;IACJ,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAE/B,MAAM,kBAAkB,CAAC,YAAoB;QAC3C,WAAW;YAAE;YAAY;QAAK;QAC9B,YAAY;IACd;IAEA,MAAM,gBAAgB;QACpB,YAAY;QACZ,WAAW,CAAC;QACZ,OAAO,CAAC,IAAM,IAAI;IACpB;IAEA,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBACC,SAAS;4BACP,WAAW,CAAC;4BACZ,YAAY;wBACd;wBACA,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,sJAAY;oBAAC,cAAc;oBAAM,UAAU;;;;;;;;;;;0BAG9C,8OAAC,sJAAY;gBAEX,MAAM;gBACN,aAAa;eAFR,GAAG,KAAK,CAAC,EAAE,KAAK;;;;;YAKtB,0BACC,8OAAC,qJAAW;gBACV,SAAS,IAAM,YAAY;gBAC3B,WAAW;gBACX,mBAAmB,QAAQ,UAAU;gBACrC,aAAa;gBACb,aAAa,QAAQ,IAAI;;;;;;;;;;;;AAKnC"}}]
}